<style>
    body, html {
        margin: 0; padding: 0; height: 100%; overflow: hidden;
    }
</style>
<iframe id="preview" src="{{ preview_url }}" width="100%" height="100%" style="border: none;"></iframe>
<script>
    // Relay messages from BroadcastChannel into the iFrame
    const origin = new URL("{{ preview_url }}").origin
    const wn = document.getElementById('preview').contentWindow;
    const channel = new BroadcastChannel("wagtail-preview-{{ token }}")
    console.log(origin)
    channel.onmessage = function(res) {
        console.log(res)
        wn.postMessage(JSON.stringify({
            type: 'preview-update',
            data: res.data
        }), origin)
    }
</script>
